<%- include('./partials/header') %>
<%- include('./partials/nav') %>

<div class="flex flex-col lg:flex-row rounded-xl w-full lg:w-[60%] pt-6 lg:pt-10 m-auto px-4 lg:px-0">
  <div class="w-full lg:w-[80%] px-4 lg:px-10">
    <div class="w-full pt-6 lg:pt-10 m-auto p-5 flex flex-col lg:flex-row items-center lg:items-start">
      <form class="hidden form-image" action="/image/<%= user._id %>" method="post" enctype="multipart/form-data">
        <input class="input-image" type="file" name="profilepic">
      </form>
      <img class="preview-image mb-6 lg:mb-0 mr-0 lg:mr-10 w-[20vh] h-[20vh] rounded-full object-cover cursor-pointer" src="/images/<%= user.profilepic %>" alt="Profile Picture">
      <div class="text-center lg:text-left">
        <h1 class="text-3xl lg:text-5xl font-extrabold text-red-400">
          <%= user.name %>
        </h1>
        <h2 class="mt-3 text-lg lg:text-xl font-bold text-red-400">
          @<%= user.username %>
        </h2>
      </div>
    </div>
    <h1 class="rounded-xl text-xl lg:text-2xl font-extrabold text-red-400">
      Profile Setting
    </h1>
    <form action="/update-user/<%= user._id %>" class="mt-6 lg:mt-10 text-center lg:text-left" method="post">
      <input class="w-full mb-6 lg:mb-10 border border-zinc-500 p-3 rounded-md text-xl" type="text" placeholder="Full name" value="<%= user.name %>" name="name">
      <input class="w-full mb-6 lg:mb-10 border border-zinc-500 p-3 rounded-md text-xl" type="text" placeholder="Username" value="<%= user.username %>" name="username">
      <input class="w-full mb-6 lg:mb-10 border border-zinc-500 p-3 rounded-md text-xl" type="email" placeholder="email@service.provider" name="email" value="<%= user.email %>">
      <button class="mt-5 text-center block w-full lg:w-[60%] mx-auto hover:bg-red-600 rounded text-white py-3 px-5 bg-red-400">
        Update User Details
      </button>
    </form>
  </div>
  <div class="w-full lg:w-[20%] mt-10 lg:mt-0">
    <h1 class="rounded-xl text-xl lg:text-2xl font-extrabold text-red-400">
      Profile Setting
    </h1>
    <div class="flex flex-col justify-between mt-5 h-full">
      <div class="flex flex-col">
        <a class="text-red-400 mb-3 font-semibold" href="/reset-password/<%= user._id %>">Reset Password</a>
        <a class="text-red-400 mb-3 font-semibold" href="/delete-user/<%= user._id %>">Delete Profile</a>
      </div>
      <a class="text-red-400 mb-3 font-semibold" href="/logout-user/<%= user._id %>">Logout</a>
    </div>
  </div>
</div>

<script>
  const inputImage = document.querySelector(".input-image");
  const previewImage = document.querySelector(".preview-image");
  const formImage = document.querySelector(".form-image");
  
  previewImage.addEventListener("click", function () {
    inputImage.click();
  });
  
  inputImage.addEventListener("change", function () {
    formImage.submit();
  });
</script>

<%- include('./partials/footer') %>
